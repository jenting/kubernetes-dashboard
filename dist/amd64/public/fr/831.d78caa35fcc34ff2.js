"use strict";(self.webpackChunkkubernetes_dashboard=self.webpackChunkkubernetes_dashboard||[]).push([[831],{8831:(J,l,o)=>{o.r(l),o.d(l,{SecretModule:()=>K});var R=o(1028),N=o(6042),a=o(4793),g=o(3621),h=o(3456),O=o(6275),f=o(6758),I=o(2722),E=o(4489),S=o(1495),M=o(5387),C=o(7575),v=o(5467),e=o(4650),u=o(2787),D=o(958),A=o(7347),c=o(6895),p=o(1870),m=o(529),y=o(3778),G=o(5938),x=o(9549),U=o(9349),P=o(284),d=o(4006),F=o(4859);function B(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",1)(1,"mat-form-field",2)(2,"textarea",3),e.\u0275\u0275listener("ngModelChange",function(s){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().text=s}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(3,"div",4)(4,"button",5),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().update()}),e.\u0275\u0275i18n(5,6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"button",7),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().cancel()}),e.\u0275\u0275i18n(7,8),e.\u0275\u0275elementEnd()()()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("ngModel",t.text)}}let H=(()=>{class n{constructor(t,_,s){this.dialog_=t,this.http_=_,this.decoder_=s,this.onClose=new e.EventEmitter,this.text="",this.editing_=!1}set editing(t){this.editing_=t,this.updateText_()}get editing(){return this.editing_}set secret(t){this.secret_=t}get secret(){return this.secret_}ngOnInit(){this.updateText_()}update(){const t=p.r.getUrl(this.secret.typeMeta,this.secret.objectMeta);this.http_.get(t).toPromise().then(_=>{const s=this.encode_(this.text);_.data[this.key]=this.encode_(this.text);const r=p.r.getUrl(this.secret.typeMeta,this.secret.objectMeta);this.http_.put(r,_,{headers:this.getHttpHeaders_(),responseType:"text"}).subscribe(()=>{this.secret_.data[this.key]=s,this.onClose.emit(!0)},this.handleErrorResponse_.bind(this))})}cancel(){this.onClose.emit(!0)}updateText_(){this.text=this.secret&&this.key?this.decoder_.base64(this.secret.data[this.key]):""}encode_(t){return btoa(t)}getHttpHeaders_(){const t=new m.WM;return t.set("Content-Type","application/json"),t.set("Accept","application/json"),t}handleErrorResponse_(t){t&&this.dialog_.open(y.a,{width:"630px",data:{title:"OK"===t.statusText?"Internal server error":t.statusText,message:t.error||"Could not perform the operation.",confirmLabel:"OK"}})}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(G.uw),e.\u0275\u0275directiveInject(m.eN),e.\u0275\u0275directiveInject(u.F))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["kd-secret-detail-edit"]],inputs:{key:"key",editing:"editing",secret:"secret"},outputs:{onClose:"onClose"},decls:1,vars:1,consts:function(){let i,t;return i="Mettre \xE0 jour",t="Annuler",[["class","kd-secret-detail-edit-container",4,"ngIf"],[1,"kd-secret-detail-edit-container"],[1,"kd-secret-detail-text"],["cdkTextareaAutosize","","cdkAutosizeMinRows","1","cdkAutosizeMaxRows","20","matInput","",3,"ngModel","ngModelChange"],[1,"kd-secret-detail-actions"],["mat-raised-button","","color","primary","id","confirm-edit",3,"click"],i,["mat-button","","color","primary",3,"click"],t]},template:function(t,_){1&t&&e.\u0275\u0275template(0,B,8,1,"div",0),2&t&&e.\u0275\u0275property("ngIf",_.secret)},directives:[c.NgIf,x.KE,U.IC,P.Nt,d.DefaultValueAccessor,d.NgControlStatus,d.NgModel,F.lW],styles:[".kd-secret-detail-text[_ngcontent-%COMP%]{width:100%}.kd-secret-detail-text[_ngcontent-%COMP%]   .mat-input-element[_ngcontent-%COMP%]{font-family:Roboto Mono Regular,monospace;font-size:14px}.kd-secret-detail-actions[_ngcontent-%COMP%]{min-height:52px;padding:8px 0}"]}),n})();function L(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"kd-hidden-property",7,8)(2,"div",9),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",10),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"div",11)(7,"kd-secret-detail-edit",12),e.\u0275\u0275listener("onClose",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275reference(1),r=e.\u0275\u0275nextContext();return s.mode=r.HiddenPropertyMode.Hidden}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(8,"div",13),e.\u0275\u0275text(9),e.\u0275\u0275elementEnd()()}if(2&n){const t=i.$implicit,_=e.\u0275\u0275reference(1),s=e.\u0275\u0275nextContext();e.\u0275\u0275property("enableEdit",!0),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(t),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(s.decoder.base64(null==s.secret?null:s.secret.data[t])),e.\u0275\u0275advance(2),e.\u0275\u0275property("secret",s.secret)("key",t)("editing",_.mode==s.HiddenPropertyMode.Edit),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("",s.decoder.base64(null==s.secret?null:s.secret.data[t]).length," bytes")}}function b(n,i){1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275i18n(1,14),e.\u0275\u0275elementContainerEnd())}let $=(()=>{class n{constructor(t,_,s,r,X){this.secret_=t,this.actionbar_=_,this.activatedRoute_=s,this.notifications_=r,this.decoder=X,this.endpoint_=C.wE.resource(C._z.secret,!0),this.unsubscribe_=new f.x,this.isInitialized=!1,this.HiddenPropertyMode=E.C}ngOnInit(){const t=this.activatedRoute_.snapshot.params.resourceName,_=this.activatedRoute_.snapshot.params.resourceNamespace;this.secret_.get(this.endpoint_.detail(),t,_).pipe((0,I.R)(this.unsubscribe_)).subscribe(s=>{this.secret=s,this.notifications_.pushErrors(s.errors),this.actionbar_.onInit.emit(new S.N("Secret",s.objectMeta,s.typeMeta)),this.isInitialized=!0})}ngOnDestroy(){this.unsubscribe_.next(),this.unsubscribe_.complete(),this.actionbar_.onDetailsLeave.emit()}getDataKeys(){return this.secret&&this.secret.data?Object.keys(this.secret.data):[]}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(v.p),e.\u0275\u0275directiveInject(S.b),e.\u0275\u0275directiveInject(a.ActivatedRoute),e.\u0275\u0275directiveInject(M.TF),e.\u0275\u0275directiveInject(u.F))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["kd-secret-detail"]],decls:7,vars:5,consts:function(){let i,t;return i="Donn\xE9es",t="Il n'y a pas de donn\xE9es \xE0 afficher.",[[3,"initialized","objectMeta"],[3,"initialized"],["title",""],i,["content",""],[3,"enableEdit",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"enableEdit"],["property",""],["key",""],["whenVisible","",1,"kd-code-block"],["whenEdit",""],[3,"secret","key","editing","onClose"],["whenHidden",""],t]},template:function(t,_){1&t&&(e.\u0275\u0275element(0,"kd-object-meta",0),e.\u0275\u0275elementStart(1,"kd-card",1)(2,"div",2),e.\u0275\u0275i18n(3,3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",4),e.\u0275\u0275template(5,L,10,7,"kd-hidden-property",5),e.\u0275\u0275template(6,b,2,0,"ng-container",6),e.\u0275\u0275elementEnd()()),2&t&&(e.\u0275\u0275property("initialized",_.isInitialized)("objectMeta",null==_.secret?null:_.secret.objectMeta),e.\u0275\u0275advance(1),e.\u0275\u0275property("initialized",_.isInitialized),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngForOf",_.getDataKeys()),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!(null!=_.secret&&_.secret.data)))},directives:[D.A,A.A,c.NgForOf,E.U,H,c.NgIf],encapsulation:2}),n})();var j=o(354);const T={path:"",component:(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["kd-secret-list-state"]],decls:1,vars:0,consts:function(){let i;return i="Secrets",[["title",i]]},template:function(t,_){1&t&&e.\u0275\u0275element(0,"kd-secret-list",0)},directives:[j.A],encapsulation:2}),n})(),data:{breadcrumb:h.SX.Secrets,parent:O.M}},k={path:":resourceNamespace/:resourceName",component:$,data:{breadcrumb:"{{ resourceName }}",parent:T}};let z=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=e.\u0275\u0275defineInjector({imports:[[a.RouterModule.forChild([T,k,g.aA])],a.RouterModule]}),n})(),K=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=e.\u0275\u0275defineInjector({imports:[[N.m,R.K,z]]}),n})()}}]);